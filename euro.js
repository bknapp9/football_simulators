const startDrawBtn=document.querySelector("#startDraw"),fastDrawBtn=document.querySelector("#fastDraw"),continueFromOriginalBtn=document.querySelector("#continueFromOriginal"),continueToKOBtn=document.querySelector("#continueToKO"),generateFixturesBtn=document.querySelector("#generateFixturesBtn"),potsTables=document.querySelectorAll(".potsTable");let potsBalls=document.querySelectorAll(".potsBall"),KORound=0,groupIdx=0;const groupStageTeams=document.querySelectorAll(".GSTeamName"),groupStageImgs=document.querySelectorAll("#groupStageImgs");let potIndex=0,r=0;const GSDoneTeams=[];let tabLinks=document.querySelectorAll(".tabs a");tabLinks=Array.from(tabLinks).slice(0,10);const tabsContainer=document.querySelector(".tabs-container"),tabPanels=document.querySelectorAll(".tabs-panel");let groupStageTable=document.querySelector(".groupStageTable"),groupStageTables=document.querySelectorAll(".groupStageTable:not(#thirdPlaceTable)");const topTenScorers=document.querySelector(".topScorers"),topScorers=document.querySelector(".scorers");let groupSpacings=document.querySelectorAll(".groupSpacing");const hr=document.querySelector(".hr");let groupSpacing=groupSpacings[0];const GSFixtures=document.querySelectorAll(".groupStageMatches"),GSMatchups=[[1,2,3,4],[1,3,2,4],[4,1,2,3]],bestThirdPlaceTable=document.querySelector("#thirdPlaceTable"),GSTableMatches=document.querySelectorAll(".GSTableMatches"),topScorersList={},RO16Matches=document.querySelector("#RO16Matches"),RO16MatchesSect=document.querySelectorAll("#RO16Match"),qualifiedToRO16=[],RO16Matchups=[[1,3],[4,13],[6,11],[8,15],[2,12],[0,5],[10,14],[7,9]],tabsContainerKO=document.querySelector("#tabsContainerKO"),tabLinksKO=tabsContainerKO.querySelectorAll(".tabs a"),simulateMatchdayBtn=document.querySelector("#simulateMatchdayBtn"),simulateKOBtn=document.querySelector("#simulateKOBtn"),GSTables=document.querySelector("#GSTables"),qualifiedToF=[],qualifiedToQF=[],qualifiedToSF=[],RO16MatchesTables=document.querySelectorAll("#RO16Matches .GSTableMatches"),QFMatchesTable=document.querySelector(".QFMatches"),SFMatchesTable=document.querySelector(".SFMatches"),finalMatchesTable=document.querySelector(".finalMatch");let QFFixtureIdx=0;const QFTeamNames=document.querySelectorAll("#QFTeamName"),QFTeamImgs=document.querySelectorAll("#QFTeamsImgs");function getThirdPlaces(){const e=[];return groupStageTables.forEach((t=>{const a=t.querySelectorAll("tbody tr");a.length>=3&&e.push(a[2])})),e}const loadTeams=async()=>{const e=await fetch("euro_NT.json"),t=await e.json();return[t.Teams.Team,t.OriginalGS]};function disableBalls(){document.querySelectorAll(".ball").forEach((e=>{e.style.pointerEvents="none",e.style.backgroundColor="#8b8c89"}))}function enableBalls(){document.querySelectorAll(".ball").forEach((e=>{e.style.pointerEvents="auto",e.style.backgroundColor="#fff"}))}function isWindowSmall(){return window.innerWidth<=1304}loadTeams().then((e=>{const t=e[0],a=e[1];async function s(e,t,a,r=!1,l=!1){if(enableBalls(),o(a),isWindowSmall())for(let a of potsBalls)a.classList.add("ball"),a.classList.add("white"),a.classList.remove("hide"),n(e,t,a,r),e--;else{await function(e){return new Promise(((t,a)=>{e.classList.remove("hide"),e.style.position="absolute",e.style.bottom="0",e.style.right="0",e.style.transition="all 1s ease-in-out",e.style.transform="translate(0, 0)",setTimeout((()=>{e.style.transform="translate(20%, 35%)",t()}),100)}))}(a);let o=0;for(let a of potsBalls)o++,a.classList.add("ball","white"),a.classList.remove("hide"),n(e--,t,a,r);document.querySelectorAll(".potsBall:not(.hide)").length!==a.querySelectorAll(".potsTeam:not(.hide)").length&&s(6,t=i(l),a,r,l)}}function o(e=!1,t=potsTables){for(let a of t)a!==e&&a.classList.add("hide")}function l(e){for(let t of e)t.classList.contains("done")||t.classList.remove("hide")}function n(e,t,a,s=!1){let r=Math.floor(Math.random()*e),o=t[r],l=0;for(;s&&s.includes(o.trim())&&l<8;)r=Math.floor(Math.random()*e),o=t[r],l++;if(8===l)return a.classList.add("hide"),!1;a.style.fontSize=0,a.innerText=o,t.splice(r,1)}function i(e){u=potsTables[e],m=u.querySelectorAll(".potsTeam"),m=c(m);let t=[];return m.forEach((e=>{t.push(e.innerText)})),t}function c(e){const t=Array.from(e);for(let e=t.length-1;e>0;e--){const a=Math.floor(Math.random()*(e+1));[t[e],t[a]]=[t[a],t[e]]}return t}function d(){const e=getThirdPlaces(),t=bestThirdPlaceTable.querySelectorAll("tr.stats");for(let a=0;a<e.length;a++){const s=e[a],r=t[a],o=s.cloneNode(!0);o.classList.remove("thirdPlace"),r.replaceWith(o)}}let u,m,h,p=0;async function g(e,t,a){isWindowSmall()||async function(e,t,a){t++,e.style.position="absolute",e.style.bottom="0",e.style.right="0",e.style.transition="all 1s ease-in-out",e.style.transform="translate(0, 0)",t<=4?t=400*t-2e3:t>4&&t<9&&(t=400*(t-4)-2e3,a=-280),setTimeout((()=>{e.style.transform=`translate(${t}px, ${a}px)`,setTimeout((()=>{e.classList.add("hide")}),1e3)}),100)}(e,t,a),await new Promise((e=>setTimeout(e,1e3)))}function S(e,t){return Math.floor(Math.random()*(t-e+1))+e}function f(e){let t=Math.random();return"Draw"===e?function(e,t){let a;do{a=Math.floor(Math.random()*(t-e+1))+e}while(a%2!=0);return a}(0,10):t<.85?S(1,3):t<.15?S(4,8):S(9,10)}function T(e,t){return e<=20?t%2==0?S(2,2):S(1,1):e>20&&e<=40&&t>=2?t%2==0?S(2,2):S(3,3):e>=40&&t>=3?t%2==0?S(4,4):S(3,3):t%2==0?S(2,2):0===t?0:S(1,1)}function y(e,t){let a=t<10?.2:.1;if(Math.random()<a)return"Draw";return Math.random()<e?"Home Team":"Away Team"}function b(e,t,a=!1){if(0===t)return null;const s=e.Players,r=s.find((e=>!0===e.PenaltyTaker));let o=[],l=[],n=100*Math.random(),i=100*Math.random(),c=0;for(const e of s){if(i<=20){o.push({player:r,isPenalty:!0});let e=A(a);l.push(e),c++,i=100*Math.random()}if(n<e.ScoringChance&&c<t){o.push({player:e,isPenalty:!1});let s=A(a);if(l.push(s),c++,c>=t){for(let e of o){const t=e.player.FirstName+" "+e.player.LastName;topScorersList[t]?topScorersList[t]++:topScorersList[t]=1}return{goalScorers:o,goalMinutes:l}}}n-=e.ScoringChance}return o}function L(t){const a=function(e,t=10){const a=Object.entries(e),s=a.sort(((e,t)=>t[1]-e[1])).slice(0,t),r=Object.fromEntries(s);return r}(t,10),s=Array.from(topTenScorers.querySelectorAll("tr"));let r=0;for(const[t,o]of Object.entries(a)){if(r>=s.length)break;const a=s[r++];let l=a.querySelector(".topScorerName"),n=a.querySelector(".topScorerTeam"),i=a.querySelector(".topScorerGoals");l.textContent=t,n.textContent=w(e,t),i.textContent=o}}function M(e){let t=e.querySelector("tbody"),a=Array.from(t.querySelectorAll("tr"));a.sort((function(e,t){let a=parseInt(e.querySelector(".totalPts").textContent)||0,s=parseInt(t.querySelector(".totalPts").textContent)||0,r=parseInt(e.querySelector(".goalDifference").textContent)||0,o=parseInt(t.querySelector(".goalDifference").textContent)||0;return a!==s?s-a:o-r})),a.forEach((function(e){t.appendChild(e)})),a.forEach((function(e){t.appendChild(e)}))}function q(e){return Array.isArray(e)?e.sort(((e,t)=>parseInt(e)-parseInt(t))):(e.goalMinutes.sort(((e,t)=>parseInt(e)-parseInt(t))),e.goalScorers.sort(((t,a)=>e.goalMinutes.indexOf(t)-e.goalMinutes.indexOf(a))),e)}function x(e){let t=document.getElementById("GSTables").querySelectorAll("table");for(let a=0;a<t.length;a++){let s=t[a].querySelectorAll("tbody tr");for(let t=0;t<s.length;t++){if(s[t].querySelector(".GSTeamName").textContent.trim()===e.trim())return s[t]}}return null}function O(e,t,a){const s=parseInt(e.querySelector(t).textContent)+a;e.querySelector(t).textContent=s.toString()}function v(e){return e.replace(/[áéíóúÁÉÍÓÚãñÑ]/g,(e=>e.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e.replace(/[áéíóúÁÉÍÓÚãñÑ]/g,"")))}function A(e=!1){const t=Math.random();if(e){return`${Math.floor(31*Math.random())+90}`}if(t<=.05){let e;e=Math.random()<=.5?45:90;return`${e} + ${Math.floor(10*Math.random())+1}`}return`${Math.floor(90*Math.random())+1}`}function F(){const e=[{score:"4-3",probability:.235},{score:"3-2",probability:.206},{score:"5-4",probability:.163},{score:"4-2",probability:.134},{score:"3-1",probability:.122},{score:"5-3",probability:.113},{score:"4-1",probability:.101},{score:"2-2",probability:.067},{score:"2-1",probability:.059},{score:"1-1",probability:.046}];return(()=>{const t=Math.random();let a=0;for(const s of e)if(a+=s.probability,t<=a)return s.score})()}function B(){const e=Math.random();let t,a;return t=e<.5?"Home Team":"Away Team",a=e<.5?"Penalties":"Extra Time",{winner:t,winMethod:a}}function w(e,t){for(const a of Object.values(e[0])){if(a.Players.find((e=>(e.FirstName+" "+e.LastName).trim()===t.trim())))return a.Team}return null}function I(e,t){try{if(!t)return{...e};if(e.goalScorers){const a=[...e.goalScorers,...t.goalScorers];return{goalScorers:a,goalMinutes:[...e.goalMinutes,...t.goalMinutes]}}e={goalScorers:e}}catch(e){console.log(e)}}function R(e){qualifiedToQF.length<8?qualifiedToQF.push(e):qualifiedToSF.length<4?qualifiedToSF.push(e):qualifiedToF.push(e)}function G(e,t){const a=v(e);groupStageTeams[potIndex+4*t].innerText=e,groupStageImgs[potIndex+4*t].src=`images/${a.replace(/\s+/g,"")}.png`}startDrawBtn.addEventListener("click",(e=>{e.preventDefault(),startDrawBtn.classList.add("hide"),fastDrawBtn.classList.add("hide"),u=potsTables[p],h=i(p),continueFromOriginalBtn.classList.add("hide");s(6,h,u)})),continueDrawBtn.addEventListener("click",(e=>{e.preventDefault(),continueDrawBtn.classList.add("hide"),u=potsTables[potIndex],m=u.querySelectorAll(".potsTeam"),m=c(m),h=i(potIndex);l(potsTables),s(6,h,u).then((()=>{}))})),potsBalls.forEach((e=>{e.addEventListener("click",(()=>{let t=e.innerText.trim();const a=Array.from(m).find((e=>e.innerText.trim()===t));e.classList.add("hide"),disableBalls();g(a,groupIdx,-550).then((()=>{const e=a.innerText,t=v(e);groupStageTeams[potIndex+4*groupIdx].innerText=e,groupStageImgs[potIndex+4*groupIdx].src=`images/${t.replace(/\s+/g,"")}.png`,r++,enableBalls(),groupIdx++,GSDoneTeams.push(e.trim()),6===r||12===r||18===r?(potIndex+=1,groupIdx=0,startDrawBtn.classList.add("hide"),fastDrawBtn.classList.add("hide"),continueFromOriginalBtn.classList.add("hide"),u.classList.add("hide"),continueDrawBtn.classList.remove("hide"),done=!1):24===r&&(generateFixturesBtn.classList.remove("hide"),o(!1,potsTables),r=0,RO16TeamIdx=0)}))}))})),fastDrawBtn.addEventListener("click",(e=>{e.preventDefault(),[startDrawBtn,fastDrawBtn].forEach((e=>e.classList.add("hide"))),0===KORound&&(!function(){continueFromOriginalBtn.classList.add("hide"),o(!1,potsTables);for(const e of Array.from(potsTables).slice(0,4)){groupIdx=0;let t=e.querySelectorAll(".potsTeam");t=c(t);let a=0;for(;a<t.length;){G(t[a].innerText.trim(),groupIdx),groupIdx++,a++}potIndex++}}(),generateFixturesBtn.classList.remove("hide"))})),continueFromOriginalBtn.addEventListener("click",(e=>{p=0,e.preventDefault(),startDrawBtn.classList.add("hide"),fastDrawBtn.classList.add("hide"),continueFromOriginalBtn.classList.add("hide"),o(!1,potsTables);for(let e in a)a[e].forEach((e=>{const t=v(e);groupStageTeams[p].innerText=e,groupStageImgs[p].src=`images/${t.replace(/\s+/g,"")}.png`,p++}));generateFixturesBtn.classList.remove("hide"),startDrawBtn.classList.add("hide"),continueFromOriginalBtn.classList.add("hide"),fastDrawBtn.classList.add("hide")})),generateFixturesBtn.addEventListener("click",(e=>{e.preventDefault();let a,s=0;o(!1,groupStageTables),generateFixturesBtn.classList.add("hide"),tabsContainer.classList.remove("hide"),simulateMatchdayBtn.classList.remove("hide"),bestThirdPlaceTable.classList.add("hide"),hr.classList.add("hide");for(let e of tabLinks){for(groupStageTable of groupStageTables){const e=document.querySelectorAll(".stats");for(const t of e)t.classList.remove("hideTable");let t=groupStageTable.querySelectorAll("tbody tr");if(2===groupStageTable.querySelectorAll("thead tr th").length){const e=groupStageTable.querySelector("thead tr");["P","W","D","L","GD","Pts"].forEach((t=>{const a=document.createElement("th");a.classList.add("tableTeamStats");const s=document.createElement("b");s.textContent=t,a.appendChild(s),e.appendChild(a)})),t.forEach((t=>{for(let a=0;a<e.cells.length-1;a++){const e=document.createElement("td");t.appendChild(e)}}));let r=groupStageTable.querySelectorAll(".GSTeamName"),o=groupStageTable.querySelectorAll(".teamsImgs");a=GSFixtures[s];let l=a.querySelectorAll("table"),n=0,i=0;for(let e of l){i=0;let t=e.querySelectorAll(".homeTeamName"),a=e.querySelectorAll(".homeTeamLogo .teamsImgs"),s=e.querySelectorAll(".awayTeamName"),l=e.querySelectorAll(".awayTeamLogo .teamsImgs");t[0].innerText=r[GSMatchups[n][i]-1].innerText,a[0].src=o[GSMatchups[n][i]-1].src,t[1].innerText=r[GSMatchups[n][i+2]-1].innerText,a[1].src=o[GSMatchups[n][i+2]-1].src,s[0].innerText=r[GSMatchups[n][i+1]-1].innerText,l[0].src=o[GSMatchups[n][i+1]-1].src,s[1].innerText=r[GSMatchups[n][i+3]-1].innerText,l[1].src=o[GSMatchups[n][i+3]-1].src,i++,n++}}groupStageTables[0].classList.add("hide"),groupSpacing.classList.add("hide"),GSFixtures[0].classList.add("hide"),topScorers.classList.add("hide"),groupStageTable=groupStageTables[0],groupSpacing=groupSpacings[0],groupSpacing.classList.remove("hide"),groupStageTable.classList.remove("hide"),groupStageTable.classList.add("group-active"),a=GSFixtures[0],a.classList.remove("hide"),s++,d()}e.addEventListener("click",(t=>{t.preventDefault(),groupStageTables[0].classList.add("hide"),groupStageTable.classList.add("hide"),groupSpacing.classList.add("hide"),a.classList.add("hide"),topScorers.classList.add("hide"),bestThirdPlaceTable.classList.add("hide");let s=document.querySelector(".tabs li.active");s&&s.classList.remove("active");const r=e.parentElement;r.classList.add("active");const o=r.getAttribute("data-index");"6"===o?(bestThirdPlaceTable.classList.remove("hide"),bestThirdPlaceTable.classList.add("group-active")):"7"===o?topScorers.classList.remove("hide"):(groupStageTable=groupStageTables[o],groupSpacing=groupSpacings[o],groupSpacing.classList.remove("hide"),groupStageTable.classList.remove("hide"),groupStageTable.classList.add("group-active"),a=GSFixtures[o],a.classList.remove("hide"))}))}let n=0;simulateMatchdayBtn.addEventListener("click",(async e=>{e.preventDefault(),n++;const a=[0,3,6,9,12,15].map((e=>e+n-1));simulateMatchdayBtn.textContent=`Simulate Matchday ${n+1}`;const s=a.flatMap((e=>[...GSTableMatches[e].querySelectorAll(".homeTeamName, .awayTeamName")].map((e=>e.textContent.trim())))),r=s.filter(((e,t)=>t%2==0)),o=s.filter(((e,t)=>t%2==1)),l=a.flatMap((e=>[e,e]));let i,c,u;for(let e=0;e<r.length;e++){const a=r[e].trim(),s=o[e].trim(),n=t.find((e=>e.Team===a)),d=t.find((e=>e.Team===s)),m=n.TeamRating,h=d.TeamRating;m>h?(i=(m-h+50)/100,c=(50-(m-h))/100,u=m-h):(i=(50-(h-m))/100,c=(h-m+50)/100,u=h-m);let p=y(i,u),g=f(p),S=T(u,g),L=0,v=0,A=x(a),F=x(s);if("Home Team"===p){L=0,v=0-S;for(let e=0;L+v<g;e++)v++,L++;O(A,"#gamesWon",1),O(F,"#gamesLost",1),O(A,"#goalDifference",S),O(F,"#goalDifference",-S),O(A,"#totalPts",3)}else if("Away Team"===p){L=0-S,v=0;for(let e=0;L+v<g;e++)v++,L++;O(F,"#gamesWon",1),O(A,"#gamesLost",1),O(F,"#goalDifference",S),O(A,"#goalDifference",-S),O(F,"#totalPts",3)}else L=g/2,v=g/2,O(A,"#gamesDrawn",1),O(F,"#gamesDrawn",1),O(A,"#goalDifference",S),O(F,"#goalDifference",S),O(A,"#totalPts",1),O(F,"#totalPts",1);let B=GSTableMatches[l[e]].querySelectorAll(".homeTeamScore:not(.done)"),w=GSTableMatches[l[e]].querySelectorAll(".awayTeamScore:not(.done)");B[0].innerText=L,w[0].innerText=v,B[0].classList.add("done"),w[0].classList.add("done");let I=GSTableMatches[l[e]].querySelectorAll(".fixtureRow:not(.done)")[0],R=I.querySelector(".details");R.remove();let G=b(n,L),D=b(d,v);if(0!==L){for(;!G.goalMinutes||!G.goalScorers;)G=b(n,L);let e=G.goalScorers,t=q(G.goalMinutes);for(let a=0;a<e.length;a++){let s=""!==e[a].player.LastName?e[a].player.LastName:e[a].player.FirstName,r=`<p class="home"><span class="goalMinute">${t[a]}' </span>  ${s}`;e[a].isPenalty&&(r+=" (p)"),r+="</p>",R.innerHTML+=r}}if(0!==v){for(;!D.goalMinutes;)D=b(d,v);let e=D.goalScorers,t=q(D.goalMinutes);for(let a=0;a<e.length;a++){let s=""!==e[a].player.LastName?e[a].player.LastName:e[a].player.FirstName,r=`<p class="away"><span class="goalMinute">${t[a]}'  </span> ${s}`;e[a].isPenalty&&(r+=" (p)"),r+="</p>",R.innerHTML+=r}}O(A,"#matchesPlayed",1),O(F,"#matchesPlayed",1);I.parentNode.querySelector(".details")||I.parentNode.insertBefore(R,I.nextSibling),I.classList.add("done");for(const e of groupStageTables)M(e)}if(L(topScorersList),d(),M(bestThirdPlaceTable),3===n&&(simulateMatchdayBtn.classList.add("hide"),continueToKOBtn.classList.remove("hide"),groupStageTables.forEach((e=>{const[t,a]=[...e.querySelectorAll(".GSTeamName")].map((e=>e.textContent));qualifiedToRO16.push(t,a)})),thirdPlaceTable)){const e=[...thirdPlaceTable.querySelectorAll(".GSTeamName")].map((e=>e.textContent));qualifiedToRO16.push(...e.slice(0,4))}}));document.querySelectorAll(".fixtureRow").forEach((e=>{e.addEventListener("click",(()=>{const t=e.parentNode.querySelector(".details");t&&(t.classList.toggle("show"),t.classList.toggle("hide"))}))})),continueToKOBtn.addEventListener("click",(e=>{if(e.preventDefault(),0===KORound){KORound++;const e=document.querySelectorAll("#RO16TeamName"),a=document.querySelectorAll("#RO16TeamsImgs");RO16FixtureIdx=0;for(let t of RO16Matchups){const s=qualifiedToRO16[t[0]],r=qualifiedToRO16[t[1]],o=v(s),l=v(r);e[RO16FixtureIdx].innerText=s,e[RO16FixtureIdx+1].innerText=r,a[RO16FixtureIdx].src=`images/${o.replace(/\s+/g,"")}.png`,a[RO16FixtureIdx+1].src=`images/${l.replace(/\s+/g,"")}.png`,RO16FixtureIdx+=2}tabsContainer.classList.add("hide"),continueToKOBtn.classList.add("hide"),o(!1,groupStageTables),o(!1,GSTableMatches),RO16Matches.classList.remove("hide"),l(RO16MatchesSect),groupSpacing.classList.add("hide"),tabsContainerKO.classList.remove("hide"),simulateKOBtn.classList.remove("hide"),tabLinksKO.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),o(!1,groupStageTables),GSTables.classList.add("hide"),document.querySelector("#tabsKO li.active")?.classList.remove("active"),e.parentElement.classList.add("active");const a=e.parentElement.getAttribute("data-index");document.querySelector(".activeTable").classList.toggle("hide","0"!==a),topScorers.classList.toggle("hide","1"!==a)}))})),simulateKOBtn.addEventListener("click",(async e=>{e.preventDefault();const a=1===KORound?[18,18,19,19,20,20,21,21]:2===KORound?[22,22,23,23]:3===KORound?[24,24]:[25],s=[...new Set(a)],r=[],o=[];let l,i,c;s.forEach((e=>GSTableMatches[e]&&void GSTableMatches[e].querySelectorAll("tbody.groupMatches tr").forEach((e=>{r.push(e.querySelector(".homeTeam .homeTeamName").textContent.trim()),o.push(e.querySelector(".awayTeam .awayTeamName").textContent.trim())}))));for(let e=0;e<r.length;e++){let s;const d=r[e],u=o[e],m=t.find((e=>e.Team===d)),h=t.find((e=>e.Team===u)),p=m.TeamRating,g=h.TeamRating;p>g?(l=(p-g+50)/100,i=(50-(p-g))/100,c=p-g):(l=(50-(g-p))/100,i=(g-p+50)/100,c=g-p);let M,O=y(l,c),v=f(O),A=T(c,v),w=0,G=0;x(d),x(u);if("Home Team"===O){w=0,G=0-A;for(let e=0;w+G<v;e++)G++,w++}else if("Away Team"===O){w=0-A,G=0;for(let e=0;w+G<v;e++)G++,w++}else w=v/2,G=v/2;if(w===G){const e=B();O=e.winner,s=e.winMethod,"Penalties"===s?M=F():(v=S(1,2),A=v,"Home Team"===O?w+=v:G+=v)}const D=GSTableMatches[a[e]].querySelectorAll(".fixtureRow:not(.done)")[0];let K=D.querySelector(".details");K.remove();let E=b(m,w),N=b(h,G);if("Extra Time"===s)if("Home Team"===O){let e=b(m,v,!0);for(;!e.goalMinutes;)e=b(m,v,!0);for(;E&&!E.goalMinutes;)E=b(m,w);E=I(e,E)}else{let e=b(h,v,!0);for(;!e.goalMinutes;)e=b(h,v,!0);for(;N&&!N.goalMinutes;)N=b(h,G);N=I(e,N)}if(0!==w){for(;E&&!E.goalMinutes;)E=b(m,w);let e=E.goalScorers,t=q(E.goalMinutes);for(let a=0;a<e.length;a++){let s=""!==e[a].player.LastName?e[a].player.LastName:e[a].player.FirstName,r=`<p class="home"><span class="goalMinute">${t[a]}' </span>  ${s}`;e[a].isPenalty&&(r+=" (p)"),r+="</p>",K.innerHTML+=r}}if(0!==G){for(;N&&!N.goalMinutes;)N=b(h,G);let e=N.goalScorers,t=q(N.goalMinutes);for(let a=0;a<e.length;a++){let s=""!==e[a].player.LastName?e[a].player.LastName:e[a].player.FirstName,r=`<p class="away"><span class="goalMinute">${t[a]}'  </span> ${s}`;e[a].isPenalty&&(r+=" (p)"),r+="</p>",K.innerHTML+=r}}D.parentNode.querySelector(".details")||D.parentNode.insertBefore(K,D.nextSibling),D.classList.add("done"),L(topScorersList),simulateKOBtn.classList.add("hide"),continueToKOBtn.classList.remove("hide"),continueToKOBtn.innerText=1===KORound?"Continue to Quarter Finals":2===KORound?"Continue to Semi Finals":"Continue to Final",qualifiedToF.length>0&&(simulateKOBtn.innerText="Simulate Final"),R(w>G?d:G>w?u:"Home Team"===O?d:u);let C=GSTableMatches[a[e]].querySelectorAll(".homeTeamScore:not(.done)"),P=GSTableMatches[a[e]].querySelectorAll(".awayTeamScore:not(.done)");if("Penalties"===s){const e=M.split("-");let t,a;"Home Team"===O?(t=parseInt(e[0]),a=parseInt(e[1])):(t=parseInt(e[1]),a=parseInt(e[0])),C[0].innerText=`${w} (${t})`,P[0].innerText=`(${a}) ${G}`}else C[0].innerText=w,P[0].innerText=G;if(C[0].classList.add("done"),P[0].classList.add("done"),4===KORound&&n>0){const e=document.querySelector(".winner");e.innerText="Home Team"===O?`${d} wins the EURO!!!`:`${u} wins the EURO!!!`;const t=new JSConfetti;t.addConfetti().then((()=>t.addConfetti())),continueToKOBtn.classList.add("hide")}}}))}else if(KORound>0)if(continueToKOBtn.classList.add("hide"),o(!1,GSTableMatches),groupSpacing.classList.add("hide"),GSTableMatches.forEach(((e,t)=>{t>=22&&t<=23&&e.classList.remove("hide")})),potIndex=0,1===KORound){const e=document.querySelectorAll("#QFTeamName"),t=document.querySelectorAll("#QFTeamsImgs");RO16Matches.classList.remove("activeTable"),QFMatchesTable.classList.add("activeTable"),QFMatchesTable.classList.remove("hide"),a(e,t,qualifiedToQF)}else if(2===KORound){QFMatchesTable.classList.remove("activeTable"),SFMatchesTable.classList.add("activeTable"),SFMatchesTable.classList.remove("hide"),continueToKOBtn.classList.add("hide"),o(!1,GSTableMatches),groupSpacing.classList.add("hide"),GSTableMatches[24].classList.remove("hide");a(document.querySelectorAll("#SFTeamName"),document.querySelectorAll("#SFTeamsImgs"),qualifiedToSF)}else if(3===KORound){SFMatchesTable.classList.remove("activeTable"),finalMatchesTable.classList.add("activeTable"),finalMatchesTable.classList.remove("hide"),continueToKOBtn.classList.add("hide"),simulateKOBtn.classList.remove("hide"),o(!1,GSTableMatches),groupSpacing.classList.add("hide"),GSTableMatches[25].classList.remove("hide");const e=document.querySelectorAll("#finalTeamName"),t=document.querySelectorAll("#finalTeamsImgs"),a=qualifiedToF[0],s=qualifiedToF[1],l=v(a),n=v(s);e[0].innerText=a,e[1].innerText=s,t[0].src=`images/${l.replace(/\s+/g,"")}.png`,t[1].src=`images/${n.replace(/\s+/g,"")}.png`,24===r&&continueToKOBtn.classList.add("hide"),KORound++}function a(e,t,a){console.log(qualifiedToQF);let s=0;for(let r=0;r<a.length;r++){const o=a[r],l=v(o);e[s].innerText=o,t[s].src=`images/${l.replace(/\s+/g,"")}.png`,s++}simulateKOBtn.classList.remove("hide"),tabsContainerKO.classList.remove("hide"),KORound++}}))}))}));
